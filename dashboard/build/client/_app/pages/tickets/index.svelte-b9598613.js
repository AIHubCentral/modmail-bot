var ue=Object.defineProperty,fe=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var J=(a,e,t)=>e in a?ue(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Z=(a,e)=>{for(var t in e||(e={}))he.call(e,t)&&J(a,t,e[t]);if(C)for(var t of C(e))_e.call(e,t)&&J(a,t,e[t]);return a},K=(a,e)=>fe(a,de(e));import{S as me,i as pe,s as ve,e as k,t as se,k as j,c as y,a as E,h as le,d as p,m as N,b as m,G as ge,g as U,H as I,a0 as Q,I as O,a1 as ae,o as R,p as we,q as G,Z as be,v as ke,n as ye,w as ie,x as re,y as ne,E as ce,B as oe,f as S,J as P}from"../../chunks/index-0eb8b19d.js";import{g as $e}from"../../chunks/navigation-0e6511d1.js";import{R as Ie}from"../../chunks/Rolling-20a2b11f.js";import{I as Ee}from"../../chunks/InfiniteScroll-0d6a794f.js";import"../../chunks/singletons-d1fb5791.js";function W(a,e,t){const c=a.slice();return c[14]=e[t],c}function X(a,e,t){const c=a.slice();return c[17]=e[t],c}function Y(a,e,t){const c=a.slice();return c[17]=e[t],c}function Te(a){let e,t,c;return t=new Ie({props:{style:"transform: scale(.2);"}}),{c(){e=k("div"),ie(t.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var o=E(e);re(t.$$.fragment,o),o.forEach(p),this.h()},h(){m(e,"class","loading svelte-1wcasmu")},m(i,o){U(i,e,o),ne(t,e,null),c=!0},p:ce,i(i){c||(G(t.$$.fragment,i),c=!0)},o(i){R(t.$$.fragment,i),c=!1},d(i){i&&p(e),oe(t)}}}function De(a){let e,t,c,i,o,f=a[3],l=[];for(let s=0;s<f.length;s+=1)l[s]=x(Y(a,f,s));let d=a[1],n=[];for(let s=0;s<d.length;s+=1)n[s]=te(W(a,d,s));return i=new Ee({}),i.$on("loadMore",a[10]),{c(){e=k("div");for(let s=0;s<l.length;s+=1)l[s].c();t=j();for(let s=0;s<n.length;s+=1)n[s].c();c=j(),ie(i.$$.fragment),this.h()},l(s){e=y(s,"DIV",{class:!0,style:!0});var h=E(e);for(let r=0;r<l.length;r+=1)l[r].l(h);h.forEach(p),t=N(s);for(let r=0;r<n.length;r+=1)n[r].l(s);c=N(s),re(i.$$.fragment,s),this.h()},h(){m(e,"class","ticket columns-template svelte-1wcasmu"),S(e,"z-index","100")},m(s,h){U(s,e,h);for(let r=0;r<l.length;r+=1)l[r].m(e,null);U(s,t,h);for(let r=0;r<n.length;r+=1)n[r].m(s,h);U(s,c,h),ne(i,s,h),o=!0},p(s,h){if(h&8){f=s[3];let r;for(r=0;r<f.length;r+=1){const $=Y(s,f,r);l[r]?l[r].p($,h):(l[r]=x($),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=f.length}if(h&14){d=s[1];let r;for(r=0;r<d.length;r+=1){const $=W(s,d,r);n[r]?n[r].p($,h):(n[r]=te($),n[r].c(),n[r].m(c.parentNode,c))}for(;r<n.length;r+=1)n[r].d(1);n.length=d.length}},i(s){o||(G(i.$$.fragment,s),o=!0)},o(s){R(i.$$.fragment,s),o=!1},d(s){s&&p(e),P(l,s),s&&p(t),P(n,s),s&&p(c),oe(i,s)}}}function x(a){let e,t=a[17].label+"",c,i;return{c(){e=k("div"),c=se(t),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0});var f=E(e);c=le(f,t),f.forEach(p),this.h()},h(){m(e,"class",i="column "+a[17].id+" svelte-1wcasmu"),S(e,"width",a[17].width+"%"),S(e,"min-width",a[17].minwidth+"px")},m(o,f){U(o,e,f),I(e,c)},p:ce,d(o){o&&p(e)}}}function ee(a){let e,t=a[17].get(a[14],a[2])+"",c;return{c(){e=k("div"),this.h()},l(i){e=y(i,"DIV",{class:!0,style:!0});var o=E(e);o.forEach(p),this.h()},h(){m(e,"class",c="column "+a[17].id+" svelte-1wcasmu"),S(e,"width",a[17].width+"%"),S(e,"min-width",a[17].minwidth+"px")},m(i,o){U(i,e,o),e.innerHTML=t},p(i,o){o&6&&t!==(t=i[17].get(i[14],i[2])+"")&&(e.innerHTML=t)},d(i){i&&p(e)}}}function te(a){let e,t,c,i=a[3],o=[];for(let l=0;l<i.length;l+=1)o[l]=ee(X(a,i,l));function f(){return a[9](a[14])}return{c(){e=k("button");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=y(l,"BUTTON",{class:!0});var d=E(e);for(let n=0;n<o.length;n+=1)o[n].l(d);d.forEach(p),this.h()},h(){m(e,"class","ticket svelte-1wcasmu")},m(l,d){U(l,e,d);for(let n=0;n<o.length;n+=1)o[n].m(e,null);t||(c=O(e,"click",ae(f)),t=!0)},p(l,d){if(a=l,d&14){i=a[3];let n;for(n=0;n<i.length;n+=1){const s=X(a,i,n);o[n]?o[n].p(s,d):(o[n]=ee(s),o[n].c(),o[n].m(e,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(l){l&&p(e),P(o,l),t=!1,c()}}}function Me(a){let e,t,c,i,o,f,l,d,n,s,h,r,$,V,T,w,u,v,_,q;const z=[De,Te],D=[];function B(g,b){return g[1]?0:1}return w=B(a),u=D[w]=z[w](a),{c(){e=k("div"),t=k("div"),c=k("span"),i=se("Tickets"),o=j(),f=k("form"),l=k("input"),n=j(),s=k("button"),h=k("img"),V=j(),T=k("div"),u.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var b=E(e);t=y(b,"DIV",{class:!0});var M=E(t);c=y(M,"SPAN",{class:!0});var F=E(c);i=le(F,"Tickets"),F.forEach(p),o=N(M),f=y(M,"FORM",{class:!0});var L=E(f);l=y(L,"INPUT",{type:!0,placeholder:!0,class:!0}),n=N(L),s=y(L,"BUTTON",{type:!0,class:!0});var H=E(s);h=y(H,"IMG",{src:!0,alt:!0,class:!0}),H.forEach(p),L.forEach(p),M.forEach(p),V=N(b),T=y(b,"DIV",{class:!0});var A=E(T);u.l(A),A.forEach(p),b.forEach(p),this.h()},h(){m(c,"class","svelte-1wcasmu"),m(l,"type","text"),m(l,"placeholder","ID / Grund / Nachricht"),l.disabled=d=!a[1],m(l,"class","svelte-1wcasmu"),ge(h.src,r="/assets/icons/search-thin.svg")||m(h,"src",r),m(h,"alt","search"),m(h,"class","svelte-1wcasmu"),m(s,"type","submit"),m(s,"class","svelte-1wcasmu"),m(f,"class",$="search "+(a[1]?"":"disabled")+" svelte-1wcasmu"),m(t,"class","header svelte-1wcasmu"),m(T,"class","tickets svelte-1wcasmu"),m(e,"class","container svelte-1wcasmu")},m(g,b){U(g,e,b),I(e,t),I(t,c),I(c,i),I(t,o),I(t,f),I(f,l),Q(l,a[0]),I(f,n),I(f,s),I(s,h),I(e,V),I(e,T),D[w].m(T,null),v=!0,_||(q=[O(l,"input",a[7]),O(f,"submit",ae(a[8]))],_=!0)},p(g,[b]){(!v||b&2&&d!==(d=!g[1]))&&(l.disabled=d),b&1&&l.value!==g[0]&&Q(l,g[0]),(!v||b&2&&$!==($="search "+(g[1]?"":"disabled")+" svelte-1wcasmu"))&&m(f,"class",$);let M=w;w=B(g),w===M?D[w].p(g,b):(ye(),R(D[M],1,1,()=>{D[M]=null}),we(),u=D[w],u?u.p(g,b):(u=D[w]=z[w](g),u.c()),G(u,1),u.m(T,null))},i(g){v||(G(u),v=!0)},o(g){R(u),v=!1},d(g){g&&p(e),D[w].d(),_=!1,be(q)}}}function Ue(a,e,t){let c,i=new Map,o=[{id:"id",label:"ID",get:u=>u.id,width:10,minwidth:120},{id:"user",label:"User",get:u=>{var v,_;return i.get(u.userId)?`
    <div style="display: flex; align-items: center; column-gap: 8px;">
     <img src="${(v=i.get(u.userId))==null?void 0:v.avatarURL}" alt="avatar" style="width: 32px; border-radius: 50%;" />
     <div style="display: flex; flex-direction: column; font-size: .9em;">
      <span>${(_=i.get(u.userId))==null?void 0:_.tag}</span>
      <span style="font-size: .9em; opacity: 80%;">${u.userId}</span>
     </div>
    </div>
   `:u.userId},width:20,minwidth:170},{id:"reason",label:"Grund",get:u=>u.reason||"/",width:40,minwidth:100},{id:"created",label:"Erstellt",get:u=>new Date(parseInt(u.createdTimestamp)).toLocaleString(),width:10,minwidth:130}];ke(async()=>{let u=await fetch("/api/v1/tickets");u.status===200&&t(1,c=await u.json()),f()});async function f(){let u=[...new Set(c.map(_=>_.userId))],v=await fetch(`/api/v1/users?${u.map(_=>`userId=${_}`).join("&")}`);if(v.status===200){for(let _ of await v.json())i.set(_.id,K(Z({},_),{tag:`${_.username}#${_.discriminator}`,avatarURL:_.avatar?`https://cdn.discordapp.com/avatars/${_.id}/${_.avatar}.png`:"https://discord.com/assets/1f0bfc0865d324c2587920a7d80c609b.png"}));t(2,i=Object.assign(i))}}let l="",d=!0;async function n(u=!1){t(1,c=[]);let v=l?`filter=${l}`:"",_=await fetch(`/api/v1/tickets${v?`?${v} `:""}`);_.status===200&&(t(1,c=await _.json()),c.length===0&&l&&!u&&n(!0))}let s=0,h=50;async function r(){s=h,h+=50;let u=l?`filter=${l}`:"",v=await fetch(`/api/v1/tickets?start=${s}&limit=${h}${u?`&${u} `:""}`);if(v.status===200){let _=await v.json();t(1,c=[...c,..._])}f()}function $(){l=this.value,t(0,l)}const V=()=>n(),T=u=>$e(`/tickets/${u.id}`),w=()=>r();return a.$$.update=()=>{a.$$.dirty&65&&l&&d&&t(6,d=!1),a.$$.dirty&65&&!l&&!d&&(t(6,d=!0),n())},[l,c,i,o,n,r,d,$,V,T,w]}class Ge extends me{constructor(e){super(),pe(this,e,Ue,Me,ve,{})}}export{Ge as default};
