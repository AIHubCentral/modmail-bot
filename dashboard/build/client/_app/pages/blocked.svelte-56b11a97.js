var me=Object.defineProperty,_e=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var Q=(a,e,t)=>e in a?me(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W=(a,e)=>{for(var t in e||(e={}))ve.call(e,t)&&Q(a,t,e[t]);if(Z)for(var t of Z(e))ge.call(e,t)&&Q(a,t,e[t]);return a},X=(a,e)=>_e(a,pe(e));import{S as be,i as ke,s as we,e as I,t as P,k as S,c as z,a as U,h as q,d as v,m as B,b as _,G as oe,g as M,H as y,a0 as Y,I as O,a1 as ce,o as L,p as ye,q as R,Z as Ie,K as x,v as ze,n as $e,M as Ee,w as ue,x as de,y as fe,E as F,B as he,f as N,J as G}from"../chunks/index-0eb8b19d.js";import{R as Ue}from"../chunks/Rolling-20a2b11f.js";import{I as De}from"../chunks/InfiniteScroll-0d6a794f.js";import{p as ee,u as Me}from"../chunks/Popup-dbd8009a.js";import"../chunks/index-d4f4015a.js";function te(a,e,t){const i=a.slice();return i[15]=e[t],i}function le(a,e,t){const i=a.slice();return i[18]=e[t],i}function se(a,e,t){const i=a.slice();return i[18]=e[t],i}function Te(a){let e,t,i;return t=new Ue({props:{style:"transform: scale(.2);"}}),{c(){e=I("div"),ue(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var o=U(e);de(t.$$.fragment,o),o.forEach(v),this.h()},h(){_(e,"class","loading svelte-1m23zr9")},m(r,o){M(r,e,o),fe(t,e,null),i=!0},p:F,i(r){i||(R(t.$$.fragment,r),i=!0)},o(r){L(t.$$.fragment,r),i=!1},d(r){r&&v(e),he(t)}}}function Ve(a){let e,t,i,r,o,f=a[4],h=[];for(let l=0;l<f.length;l+=1)h[l]=ae(se(a,f,l));let g=a[1],d=[];for(let l=0;l<g.length;l+=1)d[l]=ne(te(a,g,l));let n=null;return g.length||(n=ie()),r=new De({}),r.$on("loadMore",a[13]),{c(){e=I("div");for(let l=0;l<h.length;l+=1)h[l].c();t=S();for(let l=0;l<d.length;l+=1)d[l].c();n&&n.c(),i=S(),ue(r.$$.fragment),this.h()},l(l){e=z(l,"DIV",{class:!0});var c=U(e);for(let s=0;s<h.length;s+=1)h[s].l(c);c.forEach(v),t=B(l);for(let s=0;s<d.length;s+=1)d[s].l(l);n&&n.l(l),i=B(l),de(r.$$.fragment,l),this.h()},h(){_(e,"class","ticket columns-template svelte-1m23zr9")},m(l,c){M(l,e,c);for(let s=0;s<h.length;s+=1)h[s].m(e,null);M(l,t,c);for(let s=0;s<d.length;s+=1)d[s].m(l,c);n&&n.m(l,c),M(l,i,c),fe(r,l,c),o=!0},p(l,c){if(c&16){f=l[4];let s;for(s=0;s<f.length;s+=1){const m=se(l,f,s);h[s]?h[s].p(m,c):(h[s]=ae(m),h[s].c(),h[s].m(e,null))}for(;s<h.length;s+=1)h[s].d(1);h.length=f.length}if(c&30){g=l[1];let s;for(s=0;s<g.length;s+=1){const m=te(l,g,s);d[s]?d[s].p(m,c):(d[s]=ne(m),d[s].c(),d[s].m(i.parentNode,i))}for(;s<d.length;s+=1)d[s].d(1);d.length=g.length,!g.length&&n?n.p(l,c):g.length?n&&(n.d(1),n=null):(n=ie(),n.c(),n.m(i.parentNode,i))}},i(l){o||(R(r.$$.fragment,l),o=!0)},o(l){L(r.$$.fragment,l),o=!1},d(l){l&&v(e),G(h,l),l&&v(t),G(d,l),n&&n.d(l),l&&v(i),he(r,l)}}}function ae(a){let e,t=a[18].label+"",i,r;return{c(){e=I("div"),i=P(t),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0});var f=U(e);i=q(f,t),f.forEach(v),this.h()},h(){_(e,"class",r="column "+a[18].id+" svelte-1m23zr9"),N(e,"width",a[18].width+"%"),N(e,"min-width",a[18].minwidth+"px")},m(o,f){M(o,e,f),y(e,i)},p:F,d(o){o&&v(e)}}}function ie(a){let e,t;return{c(){e=I("div"),t=P("Keine blockierten User gefunden"),this.h()},l(i){e=z(i,"DIV",{class:!0});var r=U(e);t=q(r,"Keine blockierten User gefunden"),r.forEach(v),this.h()},h(){_(e,"class","loading svelte-1m23zr9")},m(i,r){M(i,e,r),y(e,t)},p:F,d(i){i&&v(e)}}}function re(a){let e,t=a[18].get(a[15],a[2])+"",i;return{c(){e=I("div"),this.h()},l(r){e=z(r,"DIV",{class:!0,style:!0});var o=U(e);o.forEach(v),this.h()},h(){_(e,"class",i="column "+a[18].id+" svelte-1m23zr9"),N(e,"width",a[18].width+"%"),N(e,"min-width",a[18].minwidth+"px")},m(r,o){M(r,e,o),e.innerHTML=t},p(r,o){o&6&&t!==(t=r[18].get(r[15],r[2])+"")&&(e.innerHTML=t)},d(r){r&&v(e)}}}function ne(a){let e,t,i,r,o,f,h,g,d=a[4],n=[];for(let c=0;c<d.length;c+=1)n[c]=re(le(a,d,c));function l(){return a[12](a[15])}return{c(){e=I("button");for(let c=0;c<n.length;c+=1)n[c].c();t=S(),i=I("div"),r=I("button"),o=I("img"),this.h()},l(c){e=z(c,"BUTTON",{class:!0});var s=U(e);for(let b=0;b<n.length;b+=1)n[b].l(s);t=B(s),i=z(s,"DIV",{class:!0,style:!0});var m=U(i);r=z(m,"BUTTON",{class:!0});var $=U(r);o=z($,"IMG",{src:!0,alt:!0,class:!0}),$.forEach(v),m.forEach(v),s.forEach(v),this.h()},h(){oe(o.src,f="/assets/icons/x.svg")||_(o,"src",f),_(o,"alt","unblock"),_(o,"class","svelte-1m23zr9"),_(r,"class","svelte-1m23zr9"),_(i,"class","column last svelte-1m23zr9"),N(i,"margin-left","auto"),N(i,"min-width","30px"),_(e,"class","ticket svelte-1m23zr9")},m(c,s){M(c,e,s);for(let m=0;m<n.length;m+=1)n[m].m(e,null);y(e,t),y(e,i),y(i,r),y(r,o),h||(g=O(r,"click",ce(l)),h=!0)},p(c,s){if(a=c,s&22){d=a[4];let m;for(m=0;m<d.length;m+=1){const $=le(a,d,m);n[m]?n[m].p($,s):(n[m]=re($),n[m].c(),n[m].m(e,t))}for(;m<n.length;m+=1)n[m].d(1);n.length=d.length}},d(c){c&&v(e),G(n,c),h=!1,g()}}}function Se(a){let e,t,i,r,o,f,h,g,d,n,l,c,s,m,$,b,E,u,k,p;const H=[Ve,Te],T=[];function K(w,D){return w[1]?0:1}return b=K(a),E=T[b]=H[b](a),{c(){e=I("div"),t=I("div"),i=I("span"),r=P("Blockierte User"),o=S(),f=I("form"),h=I("input"),d=S(),n=I("button"),l=I("img"),m=S(),$=I("div"),E.c(),this.h()},l(w){e=z(w,"DIV",{class:!0});var D=U(e);t=z(D,"DIV",{class:!0});var V=U(t);i=z(V,"SPAN",{class:!0});var A=U(i);r=q(A,"Blockierte User"),A.forEach(v),o=B(V),f=z(V,"FORM",{class:!0});var j=U(f);h=z(j,"INPUT",{type:!0,placeholder:!0,class:!0}),d=B(j),n=z(j,"BUTTON",{type:!0,class:!0});var C=U(n);l=z(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(v),j.forEach(v),V.forEach(v),m=B(D),$=z(D,"DIV",{class:!0});var J=U($);E.l(J),J.forEach(v),D.forEach(v),this.h()},h(){_(i,"class","svelte-1m23zr9"),_(h,"type","text"),_(h,"placeholder","User ID"),h.disabled=g=!a[1],_(h,"class","svelte-1m23zr9"),oe(l.src,c="/assets/icons/search-thin.svg")||_(l,"src",c),_(l,"alt","search"),_(l,"class","svelte-1m23zr9"),_(n,"type","submit"),_(n,"class","svelte-1m23zr9"),_(f,"class",s="search "+(a[1]?"":"disabled")+" svelte-1m23zr9"),_(t,"class","header svelte-1m23zr9"),_($,"class","tickets svelte-1m23zr9"),_(e,"class","container svelte-1m23zr9")},m(w,D){M(w,e,D),y(e,t),y(t,i),y(i,r),y(t,o),y(t,f),y(f,h),Y(h,a[0]),y(f,d),y(f,n),y(n,l),y(e,m),y(e,$),T[b].m($,null),u=!0,k||(p=[O(h,"input",a[10]),O(f,"submit",ce(a[11]))],k=!0)},p(w,[D]){(!u||D&2&&g!==(g=!w[1]))&&(h.disabled=g),D&1&&h.value!==w[0]&&Y(h,w[0]),(!u||D&2&&s!==(s="search "+(w[1]?"":"disabled")+" svelte-1m23zr9"))&&_(f,"class",s);let V=b;b=K(w),b===V?T[b].p(w,D):($e(),L(T[V],1,1,()=>{T[V]=null}),ye(),E=T[b],E?E.p(w,D):(E=T[b]=H[b](w),E.c()),R(E,1),E.m($,null))},i(w){u||(R(E),u=!0)},o(w){L(E),u=!1},d(w){w&&v(e),T[b].d(),k=!1,Ie(p)}}}function Be(a,e,t){let i,r;x(a,Me,u=>t(9,i=u)),x(a,ee,u=>t(3,r=u));let o,f=new Map,h=[{id:"user",label:"User",get:u=>{var k,p;return f.get(u.id)?`
    <div style="display: flex; align-items: center; column-gap: 8px;">
     <img src="${(k=f.get(u.id))==null?void 0:k.avatarURL}" alt="avatar" style="width: 32px; border-radius: 50%;" />
     <div style="display: flex; flex-direction: column; font-size: .9em;">
      <span>${(p=f.get(u.id))==null?void 0:p.tag}</span>
      <span style="font-size: .9em; opacity: 80%;">${u.id}</span>
     </div>
    </div>
   `:u.id},width:20,minwidth:170},{id:"reason",label:"Grund",get:u=>u.reason,width:40,minwidth:100},{id:"author",label:"Verantwortlich",get:u=>{var k,p;return f.get(u.authorId)?`
    <div style="display: flex; align-items: center; column-gap: 8px;">
     <img src="${(k=f.get(u.authorId))==null?void 0:k.avatarURL}" alt="avatar" style="width: 32px; border-radius: 50%;" />
     <div style="display: flex; flex-direction: column; font-size: .9em;">
      <span>${(p=f.get(u.authorId))==null?void 0:p.tag}</span>
      <span style="font-size: .9em; opacity: 80%;">${u.authorId}</span>
     </div>
    </div>
   `:u.authorId},width:10,minwidth:250},{id:"date",label:"Datum",get:u=>new Date(parseInt(u.blockedTimestamp)).toLocaleString(),width:10,minwidth:130}];ze(async()=>{let u=await fetch("/api/v1/blocked");u.status===200&&t(1,o=await u.json()),g()});async function g(){let u=[...new Set(o.map(p=>[p.id,p.authorId]).flat())],k=await fetch(`/api/v1/users?${u.map(p=>`userId=${p}`).join("&")}`);if(k.status===200){for(let p of await k.json())f.set(p.id,X(W({},p),{tag:`${p.username}#${p.discriminator}`,avatarURL:p.avatar?`https://cdn.discordapp.com/avatars/${p.id}/${p.avatar}.png`:"https://discord.com/assets/1f0bfc0865d324c2587920a7d80c609b.png"}));t(2,f=Object.assign(f))}}let d="",n=!0;async function l(){t(1,o=[]);let u=d?`userId=${d}`:"",k=await fetch(`/api/v1/blocked${u?`?${u} `:""}`);k.status===200&&t(1,o=await k.json())}async function c(){start=limit,limit+=50;let u=d?`userId=${d}`:"",k=await fetch(`/api/v1/blocked?start=${start}&limit=${limit}${u?`&${u} `:""}`);if(k.status===200){let p=await k.json();t(1,o=[...o,...p])}g()}let s=i;function m(){d=this.value,t(0,d)}const $=()=>l(),b=u=>Ee(ee,r={key:"unblock",value:{userId:u.id}},r),E=()=>c();return a.$$.update=()=>{a.$$.dirty&129&&d&&n&&t(7,n=!1),a.$$.dirty&129&&!d&&!n&&(t(7,n=!0),l()),a.$$.dirty&768&&i!==s&&(t(8,s=i),l())},[d,o,f,r,h,l,c,n,s,i,m,$,b,E]}class Pe extends be{constructor(e){super(),ke(this,e,Be,Se,we,{})}}export{Pe as default};
